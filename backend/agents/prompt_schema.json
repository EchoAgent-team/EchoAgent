{
  "_definitions": {
    "semantic_query": "Compact normalized text summary for semantic retrieval. Include low-level normalized tags when present (e.g., mood:nostalgic scene:night_city instrument:synth energy:medium), while preserving natural phrase context.",
    "hard_constraints": "Explicit, enforceable requirements used as deterministic filters (e.g., genres_include, instruments_include, energy, tempo_bpm_min/max, era, instrumental_only).",
    "soft_preferences": "Preference-like signals used for reranking/boosting, not strict filtering (e.g., moods, themes, energy hints, tempo hints, tags).",
    "exclusions": "Explicit negative constraints that must be avoided (e.g., genres_exclude, artists_exclude, tags_exclude, vocal_content=no_vocals)."
  },
  "_output_rules": [
    "Output JSON only (no markdown, no prose).",
    "Must include exactly these top-level keys: semantic_query, hard_constraints, soft_preferences, exclusions.",
    "Do not add extra top-level keys.",
    "semantic_query must be a non-empty string.",
    "When detectable, append low-level normalized tags to semantic_query (e.g., mood:*, scene:*, instrument:*, genre:*, energy:*).",
    "Do not encode exclusions as positive tags in semantic_query.",
    "hard_constraints, soft_preferences, and exclusions must be JSON objects.",
    "If no values are found for a section, use an empty object {}.",
    "Keep values normalized and concise; use snake_case where appropriate.",
    "Do not invent unsupported constraints."
  ],
  "_template": {
    "semantic_query": "",
    "hard_constraints": {},
    "soft_preferences": {},
    "exclusions": {}
  }
}
